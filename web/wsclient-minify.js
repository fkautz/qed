"use strict";var config={};config.ws={};config.ws.host=window.location.hostname;config.ws.port=4002;var WS={host:config.ws.host,port:config.ws.port,client:null,message:{},start:function(b){var a="ws://"+this.host+":"+this.port;this.client=new WebSocket(a);var c=this;this.client.addEventListener("open",function(e){console.log("connected");if(c.client.readyState!=WebSocket.OPEN){throw new Error("Not connected")}var d={clientType:b,fname:null,event:"init"};c.client.send(JSON.stringify(d))});this.client.addEventListener("close",function(d){console.log("disconnected")});this.client.addEventListener("message",function(d){var e=JSON.parse(d.data);if(e.event=="error"){throw new Error("Server reported send error for file "+e.path)}else{if(e.event=="complete"){console.log("Server reported send file: "+e.path+" Success");var d=document.createEvent("UIEvents");d.initUIEvent("openpdf",false,false,window,0);d.pdfpath=e.path;window.dispatchEvent(d)}else{if(e.event=="key"){var d=document.createEvent("UIEvents");d.initUIEvent("keypressedremote",false,true,window,0);d.keyevent=e.keyevent;window.dispatchEvent(d)}}}})},sendFile:function(a,b){if(this.client.readyState!=WebSocket.OPEN){throw new Error("Not connected")}this.message.clientType=b;this.message.fname=a.name;this.message.event="pdf";this.client.send(JSON.stringify(this.message));this.client.send(a)},sendKeyStroke:function(a,b){if(this.client.readyState!=WebSocket.OPEN){throw new Error("Not connected")}this.message.clientType=b;this.message.fname=null;this.message.event="key";this.message.keyevent={};this.message.keyevent.keyCode=a.keyCode;this.message.keyevent.cmd=((a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0));this.client.send(JSON.stringify(this.message))}};